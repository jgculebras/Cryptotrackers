<!doctype html>
<html lang="en">
   <head>
      <!-- Required meta tags -->
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, shrink-to-fit=no">
      <!-- CSS -->
      <link rel="stylesheet" href="css/generalStyle.css">
      <link rel="stylesheet" href="css/whaletracker.css">
      <script src="https://cdn.jsdelivr.net/npm/chart.js@3.6.0/dist/chart.min.js"></script>
      <TITLE>Whale Movements Alerts | CryptoTrackers</TITLE>
      <meta http-equiv="Content-Type" content="text/html; ISO-8859-1">
      <META NAME="DC.Language" SCHEME="RFC1766" CONTENT="English">
      <META NAME="DESCRIPTION" CONTENT="Find the latest movements from wallets that we track as they have been successful in their movements for a long time or we think they can have a impact on the asset price.">
      <META NAME="KEYWORDS" CONTENT="Crypto, Whale Tracker, Whale Movements, Whale Cryptos.">
      <META NAME="Resource-type" CONTENT="Document">
      <META NAME="robots" content="ALL">
    </head>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-VF47PCBD53"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-VF47PCBD53');
</script>
   <body>
      <div class="container">
        <?php include "./navigation.html" ?>

         <div class="main hide">
           <?php
             include('header.html');
           ?>
           <div class="BoxieTest">
             <h1>Whale movements alerts.</h1>
             <h2>In this section you will find the latest movements from wallets that we track as they have been successful in their movements for a long time or we think they can have a impact on the asset price.</h2>
             <div class="WhalesCheckTest">
               <div class="TittleTest">
                 Display The Whales And Check Which You Want To Show
               </div>
               <div class="WhalesGridTest">
                 <button type="button" name="button">Meadow<span class = tick><ion-icon name=checkmark-outline></ion-icon></span></button>
                 <button type="button" name="button">Reveal<span class = tick><ion-icon name=checkmark-outline></ion-icon></span></button>
                 <button type="button" name="button">Plagiarize<span class = tick><ion-icon name=checkmark-outline></ion-icon></span></button>
                 <button type="button" name="button">Whisper<span class = tick><ion-icon name=checkmark-outline></ion-icon></span></button>
                 <button type="button" name="button">Motif<span class = tick><ion-icon name=checkmark-outline></ion-icon></span></button>
               </div>
             </div>
             <div class="DayMovesTest">
               <div class="Alert">
                 <div class="text">
                   <a href="./VIP" class="dropbtn" style="color:#c18423">üêª BUY [BEAR] VIP TIER üêª</a>
                 </div>
               </div>
               <div class="TittleTest">
                 Moves By Whales Checked
               </div>
               <div class="DaySelectTest">
                 <span class="LeftTest hide">
                   <button><ion-icon name="chevron-back-circle"></ion-icon></button>
                 </span>
                 <span class="DayTest">
                   01/10/2022
                 </span>
                 <span class="RightTest hide">
                   <button><ion-icon name="chevron-forward-circle"></ion-icon></button>
                 </span>
               </div>
               <hr>
               <div class="LeftMovesTest">
                 <table>
                   <tr>
                     <th>Time</th>
                     <th>Name</th>
                     <th>Action</th>
                     <th>Price</th>
                     <th>Item</th>
                     <th>Link</th>
                   </tr>
                   <tr>
                     <td>19:02</td>
                     <td>Meadow</td>
                     <td style="color:green">Sell</td>
                     <td style="color:green">35.07 SOL (After Fees)</td>
                     <td>ABC</td>
                     <td><a target=_blank><img src=img/exchanges/MagicEden.png alt="Magic Eden Dex"></a></td>
                   </tr>
                   <tr>
                     <td>19:01</td>
                     <td>Meadow</td>
                     <td style="color:green">Sell</td>
                     <td style="color:green">38.22 SOL (After Fees)</td>
                     <td>ABC</td>
                     <td><a target=_blank><img src=img/exchanges/MagicEden.png alt="Magic Eden Dex"></a></td>
                   </tr>
                   <tr>
                     <td>16:12</td>
                     <td>Reveal</td>
                     <td style="color:red">Buy</td>
                     <td style="color:red">5 SOL</td>
                     <td>Primates</td>
                     <td><a target=_blank><img src=img/exchanges/MagicEden.png alt="Magic Eden Dex"></a></td>
                   </tr>
                   <tr>
                     <td>16:00</td>
                     <td>Whisper</td>
                     <td style="color:red">Buy</td>
                     <td style="color:red">8.09 SOL</td>
                     <td>Infected Mob</td>
                     <td><a target=_blank><img src=img/exchanges/MagicEden.png alt="Magic Eden Dex"></a></td>
                   </tr>
                   <tr>
                     <td>14:39</td>
                     <td>Plagiarize</td>
                     <td style="color:green">Sell</td>
                     <td style="color:green">8.11 SOL (After Fees)</td>
                     <td>Jikan</td>
                     <td><a target=_blank><img src=img/exchanges/MagicEden.png alt="Magic Eden Dex"></a></td>
                   </tr>
                   <tr>
                     <td>14:11</td>
                     <td>Motif</td>
                     <td style="color:green">Sell</td>
                     <td style="color:green">80.89 SOL (After Fees)</td>
                     <td>Okay Bear</td>
                     <td><a target=_blank><img src=img/exchanges/MagicEden.png alt="Magic Eden Dex"></a></td>
                   </tr>
                   <tr>
                     <td>13:09</td>
                     <td>Motif</td>
                     <td style="color:green">Sell</td>
                     <td style="color:green">6.17 SOL (After Fees)</td>
                     <td>Jikan</td>
                     <td><a target=_blank><img src=img/exchanges/MagicEden.png alt="Magic Eden Dex"></a></td>
                   </tr>
                   <tr>
                     <td>08:23</td>
                     <td>Whisper</td>
                     <td style="color:red">Buy</td>
                     <td style="color:red">5.55 SOL</td>
                     <td>Infected Mob</td>
                     <td><a target=_blank><img src=img/exchanges/MagicEden.png alt="Magic Eden Dex"></a></td>
                   </tr>
                   <tr>
                     <td>04:10</td>
                     <td>Motif</td>
                     <td style="color:red">Buy</td>
                     <td style="color:red">80 SOL</td>
                     <td>Jikan</td>
                     <td><a target=_blank><img src=img/exchanges/MagicEden.png alt="Magic Eden Dex"></a></td>
                   </tr>
                   <tr>
                     <td>03:58</td>
                     <td>Motif</td>
                     <td style="color:red">Buy</td>
                     <td style="color:red">6.85 SOL</td>
                     <td>Jikan</td>
                     <td><a target=_blank><img src=img/exchanges/MagicEden.png alt="Magic Eden Dex"></a></td>
                   </tr>
                 </table>
                 <div class="utcTime">
                   ~ All dates are displayed in UTC Time
                 </div>
               </div>
             </div>
           </div>


           <div class="Boxie remove">
             <h1>Whale movements alerts.</h1>
             <h2>In this section you will find the latest movements from wallets that we track as they have been successful in their movements for a long time or we think they can have a impact on the asset price.</h2>
             <div class="WhalesCheck">
               <div class="Tittle">
                 Display The Whales And Check Which You Want To Show
               </div>
               <div class="WhalesGrid">
               </div>
             </div>
             <div class="DayMoves">
               <div class="Tittle">
                 Moves By Whales Checked
               </div>
               <div class="DaySelect">
                 <span class="Left">
                   <button onclick="changeDay('-1')"><ion-icon name="chevron-back-circle"></ion-icon></button>
                 </span>
                 <span class="Day">
                   03/06/2022
                 </span>
                 <span class="Right hide">
                   <button onclick="changeDay('1')"><ion-icon name="chevron-forward-circle"></ion-icon></button>
                 </span>
               </div>
               <hr>
               <div class="LeftMoves">
                 <div class="loaderSpiner remove">
                   <div class="face">
                     <div class="circle"></div>
                   </div>
                   <div class="face">
                     <div class="circle"></div>
                   </div>
                 </div>
                 <div class="LeftMovesActions">
                 </div>
               </div>
             </div>
           </div>
            <?php
              include('footer.html');
            ?>
         </div>
      </div>
      <script type="module" src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"></script>
      <script nomodule src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js"></script>
      <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
      <script>
      let firstTimeLoadingNames = true;

      let whalesSelected = [];

      let day;

      day = new Date();

      let minDate;
      let maxDate;

      let today;

      today = day.getFullYear()  + "-" + String(day.getMonth() + 1).padStart(2, '0')+ "-" + String(day.getDate()).padStart(2, '0');
      maxDate = today;

      document.querySelector(".Day").innerHTML = today;

      requestBackend = async function (direction)
      {
        document.querySelector('.loaderSpiner').classList.remove('remove');
        document.querySelector(".LeftMovesActions").innerHTML = "";

        let response = await fetch('https://cryptotrackers.io/whaleTracker',{
          method : 'POST',
          body: JSON.stringify({
            address,
            params:{
              "day": document.querySelector(".Day").innerHTML
            },
          }),
          headers: {
            "Content-Type": "application/json",
            'Authorization': "Bearer " + jwtCookie,
          }
        });

        var { dataReturned } = await response.json();

        loadMovesBackend = async function()
        {
          response = await fetch('https://cryptotrackers.io/whaleTrackerMoves',{
            method : 'POST',
            body: JSON.stringify({
              address,
              params:{
                "day": document.querySelector(".Day").innerHTML
              },
            }),
            headers: {
              "Content-Type": "application/json",
              'Authorization': "Bearer " + jwtCookie,
            }
          });

          dataReturned = await response.json();

          response = dataReturned.dataReturned;

          let totalMoves = 0;

          let stringToAdd = '<table><tr><th>Time</th><th>Name</th><th>Action</th><th>Price</th><th>Item</th><th>Link</th>';

          for (let i = 0; i < response[0].length; i++)
          {
            stringToAdd += "<tr>";
            if (whalesSelected.indexOf(response[0][i].whaleName) >= 0)
            {

              if (response[0][i].mins >= 0 && response[0][i].mins < 10) {
                var min = "0"+response[0][i].mins;
              }
              else {
                var min = response[0][i].mins;
              }

              stringToAdd += "<td>" + response[0][i].hour + ":" + min +"</td><td>" + response[0][i].whaleName + "</td>";
              if ((response[0][i].actiondesc).split(" ")[0] == "Bought")
              {
                stringToAdd += "<td style=color:red>Buy</td><td style=color:red>" + (response[0][i].actiondesc).split("for ")[1] + "</td>";
              }
              else {
                stringToAdd += "<td style=color:green>Sell</td><td style=color:green>" + (response[0][i].actiondesc).split("for ")[1] + "</td>"
              }
              stringToAdd += "<td>" + (((response[0][i].link).split("marketplace/")[1]).charAt(0).toUpperCase() + ((response[0][i].link).split("marketplace/")[1]).slice(1)) + "</td><td><a target=_blank href=" + response[0][i].link + "><img src=img/exchanges/" + response[0][i].dex + ".png alt='" + response[0][i].dex + " Dex'></a>"
              stringToAdd += "</tr>";
            }
          }

          stringToAdd += "</table><div class=utcTime>~ All dates are displayed in UTC Time</div>";

          document.querySelector(".LeftMovesActions").innerHTML = stringToAdd;

          document.querySelector('.loaderSpiner').classList.add('remove');



          document.querySelectorAll("a[target=_blank]")
          .forEach(lnk => lnk.setAttribute("rel", "nofollow noopener noreferrer"));
        }

        if (response.status == 400)
        {
          document.querySelector('.Boxie').classList.add('remove');
          document.querySelector('.Alert').classList.remove('hide');
          document.querySelector('.BoxieTest').classList.remove('remove');
          document.querySelector('.loaderSpiner').classList.add('remove');
        }

        else
        {
          document.querySelector('.Boxie').classList.remove('remove');
          document.querySelector('.Alert').classList.add('hide');
          document.querySelector('.BoxieTest').classList.add('remove');

          response = dataReturned;

          day.getFullYear()  + "-" + String(day.getMonth() + 1).padStart(2, '0')+ "-" + String(day.getDate()).padStart(2, '0');

          minDateSplit = response[2][0].day.split("T")[0].split("-");
          minDateSplit[2] = String(parseInt(minDateSplit[2])+1).padStart(2, '0');
          minDate = minDateSplit.join('-')
          document.querySelector(".Day").innerHTML = day.getFullYear()  + "-" + String(day.getMonth() + 1).padStart(2, '0') + "-" + String(day.getDate()).padStart(2, '0');
          if (firstTimeLoadingNames == true)
          {
            document.querySelector(".WhalesGrid").innerHTML = '';
            for (let i = 0; i < response[1].length; i++)
            {
              document.querySelector(".WhalesGrid").innerHTML += "<button type=button name=button>" + response[1][i].whaleName + "<span class = tick><ion-icon name=checkmark-outline></ion-icon></span></button>";
              whalesSelected.push(response[1][i].whaleName);
            }
            let ticks = document.querySelectorAll('.tick');

            ticks.forEach((item, i) => {
              item.addEventListener("click", () => {
                item.children[0].classList.toggle('hide');
                toFind = item.parentElement.innerHTML.split('<span')[0];
                const index = whalesSelected.indexOf(toFind);
                if (index > -1)
                {
                  whalesSelected.splice(index, 1); // 2nd parameter means remove one item only
                  console.log(whalesSelected);
                }
                else
                {
                  whalesSelected.push(toFind);
                }
                loadMovesBackend();
              });
            });
            firstTimeLoadingNames = false;
          }
          loadMovesBackend();
        }
      }

      requestBackend(0);


      let leftNavButtons = document.querySelectorAll('.LeftNav');

      leftNavButtons[13].classList.add('active');

      leftNavButtons[13].children[0].href = "#";

       async function changeDay(direction)
      {
        dayToComp = day.getFullYear()  + "-" + String(day.getMonth() + 1).padStart(2, '0')+ "-" + String(day.getDate()).padStart(2, '0');
        if ((minDate < dayToComp && direction == -1) || (maxDate > dayToComp && direction == 1))
        {
          if (direction == -1)
          {
            day.setDate(day.getDate() - 1);
          }
          else
          {
            day.setDate(day.getDate() + 1);
          }
          document.querySelector(".Day").innerHTML = day.getFullYear()  + "-" + String(day.getMonth() + 1).padStart(2, '0') + "-" + String(day.getDate()).padStart(2, '0');
          await requestBackend(direction);
        }
        dayToComp = day.getFullYear()  + "-" + String(day.getMonth() + 1).padStart(2, '0')+ "-" + String(day.getDate()).padStart(2, '0');
        if ((minDate == dayToComp && direction == -1) || (maxDate == dayToComp && direction == 1))
        {
          if (direction == -1)
          {
            document.querySelector('.Left').classList.add('hide');
            document.querySelector('.Right').classList.remove('hide');
          }
          else
          {
            document.querySelector('.Right').classList.add('hide');
            document.querySelector('.Left').classList.remove('hide');
          }
        }
        else
        {
          if (direction == -1)
          {
            document.querySelector('.Right').classList.remove('hide');
          }
          else
          {
            document.querySelector('.Left').classList.remove('hide');
          }
        }
      }

      let navigation = document.querySelector('.navigation');
      let main = document.querySelector('.main');
      let cards = document.querySelectorAll('.cardBox');


         let list = document.querySelectorAll('.navigation li');
         function activeLink(){
           list.forEach((item) =>
           item.classList.remove('hovered'));
           leftNavButtons[13].classList.remove('active');
           this.classList.add('hovered');
         }

         list.forEach((item) =>
         item.addEventListener('mouseover', activeLink));

         function deleteLink(){
           list.forEach((item) =>
           item.classList.remove('hovered'));
           leftNavButtons[13].classList.add('active');
         }

         list.forEach((item) =>
         item.addEventListener('mouseleave', deleteLink));

         $(document).ready(function(){
           main.classList.remove('hide');
         });
      </script>
      <script src="js/Metamask.js"></script>
   </body>
</html>
